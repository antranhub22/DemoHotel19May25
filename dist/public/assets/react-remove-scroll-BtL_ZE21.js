import{_ as z,a as M,b as O}from"./tslib-CDuPK5Eb.js";import{r as a}from"./react-BlJs-Rj_.js";import{z as j,f as K,R as Q}from"./react-remove-scroll-bar-BrVopqW4.js";import{c as _,e as q}from"./use-sidecar-1JKJ7J1d.js";import{u as G}from"./use-callback-ref-5JKzev4p.js";import{s as J}from"./react-style-singleton-QOKzqUsk.js";var V=_(),Y=function(){},X=a.forwardRef(function(e,t){var o=a.useRef(null),l=a.useState({onScrollCapture:Y,onWheelCapture:Y,onTouchMoveCapture:Y}),v=l[0],s=l[1],d=e.forwardProps,c=e.children,m=e.className,S=e.removeScrollBar,C=e.enabled,b=e.shards,E=e.sideCar,R=e.noRelative,y=e.noIsolation,r=e.inert,n=e.allowPinchZoom,u=e.as,h=u===void 0?"div":u,f=e.gapMode,g=z(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),i=E,k=G([o,t]),w=M(M({},g),v);return a.createElement(a.Fragment,null,C&&a.createElement(i,{sideCar:V,removeScrollBar:S,shards:b,noRelative:R,noIsolation:y,inert:r,setCallbacks:s,allowPinchZoom:!!n,lockRef:o,gapMode:f}),d?a.cloneElement(a.Children.only(c),M(M({},w),{ref:k})):a.createElement(h,M({},w,{className:m,ref:k}),c))});X.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};X.classNames={fullWidth:K,zeroRight:j};var D=!1;if(typeof window<"u")try{var N=Object.defineProperty({},"passive",{get:function(){return D=!0,!0}});window.addEventListener("test",N,N),window.removeEventListener("test",N,N)}catch{D=!1}var P=D?{passive:!1}:!1,U=function(e){return e.tagName==="TEXTAREA"},Z=function(e,t){if(!(e instanceof Element))return!1;var o=window.getComputedStyle(e);return o[t]!=="hidden"&&!(o.overflowY===o.overflowX&&!U(e)&&o[t]==="visible")},$=function(e){return Z(e,"overflowY")},p=function(e){return Z(e,"overflowX")},I=function(e,t){var o=t.ownerDocument,l=t;do{typeof ShadowRoot<"u"&&l instanceof ShadowRoot&&(l=l.host);var v=F(e,l);if(v){var s=x(e,l),d=s[1],c=s[2];if(d>c)return!0}l=l.parentNode}while(l&&l!==o.body);return!1},ee=function(e){var t=e.scrollTop,o=e.scrollHeight,l=e.clientHeight;return[t,o,l]},re=function(e){var t=e.scrollLeft,o=e.scrollWidth,l=e.clientWidth;return[t,o,l]},F=function(e,t){return e==="v"?$(t):p(t)},x=function(e,t){return e==="v"?ee(t):re(t)},te=function(e,t){return e==="h"&&t==="rtl"?-1:1},ae=function(e,t,o,l,v){var s=te(e,window.getComputedStyle(t).direction),d=s*l,c=o.target,m=t.contains(c),S=!1,C=d>0,b=0,E=0;do{var R=x(e,c),y=R[0],r=R[1],n=R[2],u=r-n-s*y;(y||u)&&F(e,c)&&(b+=u,E+=y),c=c.parentNode.host||c.parentNode}while(!m&&c!==document.body||m&&(t.contains(c)||t===c));return(C&&Math.abs(b)<1||!C&&Math.abs(E)<1)&&(S=!0),S},T=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},A=function(e){return[e.deltaX,e.deltaY]},H=function(e){return e&&"current"in e?e.current:e},ne=function(e,t){return e[0]===t[0]&&e[1]===t[1]},le=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},oe=0,B=[];function ce(e){var t=a.useRef([]),o=a.useRef([0,0]),l=a.useRef(),v=a.useState(oe++)[0],s=a.useState(J)[0],d=a.useRef(e);a.useEffect(function(){d.current=e},[e]),a.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(v));var r=O([e.lockRef.current],(e.shards||[]).map(H),!0).filter(Boolean);return r.forEach(function(n){return n.classList.add("allow-interactivity-".concat(v))}),function(){document.body.classList.remove("block-interactivity-".concat(v)),r.forEach(function(n){return n.classList.remove("allow-interactivity-".concat(v))})}}},[e.inert,e.lockRef.current,e.shards]);var c=a.useCallback(function(r,n){if("touches"in r&&r.touches.length===2||r.type==="wheel"&&r.ctrlKey)return!d.current.allowPinchZoom;var u=T(r),h=o.current,f="deltaX"in r?r.deltaX:h[0]-u[0],g="deltaY"in r?r.deltaY:h[1]-u[1],i,k=r.target,w=Math.abs(f)>Math.abs(g)?"h":"v";if("touches"in r&&w==="h"&&k.type==="range")return!1;var L=I(w,k);if(!L)return!0;if(L?i=w:(i=w==="v"?"h":"v",L=I(w,k)),!L)return!1;if(!l.current&&"changedTouches"in r&&(f||g)&&(l.current=i),!i)return!0;var W=l.current||i;return ae(W,n,r,W==="h"?f:g)},[]),m=a.useCallback(function(r){var n=r;if(!(!B.length||B[B.length-1]!==s)){var u="deltaY"in n?A(n):T(n),h=t.current.filter(function(i){return i.name===n.type&&(i.target===n.target||n.target===i.shadowParent)&&ne(i.delta,u)})[0];if(h&&h.should){n.cancelable&&n.preventDefault();return}if(!h){var f=(d.current.shards||[]).map(H).filter(Boolean).filter(function(i){return i.contains(n.target)}),g=f.length>0?c(n,f[0]):!d.current.noIsolation;g&&n.cancelable&&n.preventDefault()}}},[]),S=a.useCallback(function(r,n,u,h){var f={name:r,delta:n,target:u,should:h,shadowParent:ie(u)};t.current.push(f),setTimeout(function(){t.current=t.current.filter(function(g){return g!==f})},1)},[]),C=a.useCallback(function(r){o.current=T(r),l.current=void 0},[]),b=a.useCallback(function(r){S(r.type,A(r),r.target,c(r,e.lockRef.current))},[]),E=a.useCallback(function(r){S(r.type,T(r),r.target,c(r,e.lockRef.current))},[]);a.useEffect(function(){return B.push(s),e.setCallbacks({onScrollCapture:b,onWheelCapture:b,onTouchMoveCapture:E}),document.addEventListener("wheel",m,P),document.addEventListener("touchmove",m,P),document.addEventListener("touchstart",C,P),function(){B=B.filter(function(r){return r!==s}),document.removeEventListener("wheel",m,P),document.removeEventListener("touchmove",m,P),document.removeEventListener("touchstart",C,P)}},[]);var R=e.removeScrollBar,y=e.inert;return a.createElement(a.Fragment,null,y?a.createElement(s,{styles:le(v)}):null,R?a.createElement(Q,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function ie(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const ue=q(V,ce);var se=a.forwardRef(function(e,t){return a.createElement(X,M({},e,{ref:t,sideCar:ue}))});se.classNames=X.classNames;export{se as R};
