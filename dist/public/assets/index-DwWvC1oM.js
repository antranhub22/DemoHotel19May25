const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/pages-C0hFkg9Y.js","assets/react-core-C6DwaHZM.js","assets/vendor-BXT5a8vO.js","assets/css-utils-BkLtITBR.js","assets/charts-ceMktdbA.js","assets/charts-utils-DdC1WR7j.js","assets/ui-vendor-BQCqNqg0.js","assets/components-BqWspkJD.js","assets/hooks-context-yA41J7nX.js","assets/services-DrymXMI4.js","assets/validation-VWaDGczM.js","assets/siri-components-BtflWmbM.js","assets/siri-components-GqxCBkk7.css","assets/react-router-B7s-G-0E.js","assets/components-BlTBQwkB.css","assets/dashboard-components-DPQNM-LH.js"])))=>i.map(i=>d[i]);
import{R as f,j as e,r as l,bE as q}from"./react-core-C6DwaHZM.js";import{_ as A,A as L,H as M,k as C,l as E,m as D,g as b}from"./hooks-context-yA41J7nX.js";import{a6 as _,a7 as P,a8 as x,a9 as r}from"./components-BqWspkJD.js";import{af as T,ag as t,L as y,C as N}from"./vendor-BXT5a8vO.js";import{S as R,a as z,A as B,U as I,C as F,b as U,c as H,d as G,e as W,G as Q,f as V,g as K,I as O,D as i,h as Y,i as $,j as J,k as X,l as Z,N as ee}from"./pages-C0hFkg9Y.js";import{B as te}from"./react-router-B7s-G-0E.js";import{b as se}from"./services-DrymXMI4.js";import"./ui-vendor-BQCqNqg0.js";import"./charts-ceMktdbA.js";import"./css-utils-BkLtITBR.js";import"./charts-utils-DdC1WR7j.js";import"./validation-VWaDGczM.js";import"./siri-components-BtflWmbM.js";import"./dashboard-components-DPQNM-LH.js";const s=({children:n,requireAuth:a=!0,requiredRole:m,redirectTo:c="/login"})=>{const{user:j,isAuthenticated:o,isLoading:d}=b(),[,h]=N();return l.useEffect(()=>{if(!d&&a&&!o){h(c);return}},[o,d,j,a,m,c,h]),d?e.jsx(g,{}):a&&!o?null:e.jsx(e.Fragment,{children:n})},ne=f.lazy(()=>A(()=>import("./pages-C0hFkg9Y.js").then(n=>n.m),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]))),re=f.lazy(()=>A(()=>import("./pages-C0hFkg9Y.js").then(n=>n.n),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]))),g=()=>e.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Đang tải..."})]})}),ae=()=>e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{className:"container mx-auto",children:e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Kiểm tra Tính năng Email"}),e.jsx(y,{href:"/",className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90",children:"Quay lại Trang Chính"})]})})}),ie=()=>{const{login:n,isLoading:a}=b(),[,m]=N(),[c,j]=l.useState(""),[o,d]=l.useState(""),[h,v]=l.useState(""),[p,k]=l.useState(!1),w=async u=>{u.preventDefault(),v("");try{await n(c,o),m("/dashboard")}catch(S){v(S.message||"Đăng nhập thất bại")}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Đăng nhập Dashboard"}),e.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Hoặc"," ",e.jsx(y,{href:"/",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"quay lại trang chính"})]})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:w,children:[e.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[e.jsx("div",{children:e.jsx("input",{id:"email",name:"email",type:"text",autoComplete:"username",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Tên đăng nhập hoặc email",value:c,onChange:u=>j(u.target.value)})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",name:"password",type:p?"text":"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 pr-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Mật khẩu",value:o,onChange:u=>d(u.target.value)}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>k(!p),children:p?e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):e.jsxs("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),h&&e.jsx("div",{className:"text-red-600 text-sm text-center",children:h}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:a,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:a?"Đang đăng nhập...":"Đăng nhập"})})]})]})})},oe=()=>e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"max-w-md w-full text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Không có quyền truy cập"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Bạn không có quyền truy cập vào trang này."}),e.jsx(y,{href:"/",className:"text-indigo-600 hover:text-indigo-500",children:"Quay lại trang chính"})]})});function le(){const n=D(),{isAuthenticated:a}=b();return console.log("[DEBUG] Router render",{tenantInfo:n,isAuthenticated:a}),n?e.jsx(l.Suspense,{fallback:e.jsx(g,{}),children:e.jsxs(T,{children:[e.jsx(t,{path:"/",component:x}),e.jsx(t,{path:"/interface1",component:x}),e.jsx(t,{path:"/interface2",component:x}),e.jsx(t,{path:"/interface3",component:x}),e.jsx(t,{path:"/interface4",component:x}),e.jsx(t,{path:"/call-history",component:ne}),e.jsx(t,{path:"/call-details/:callId",component:re}),e.jsx(t,{path:"/email-test",component:ae}),e.jsx(t,{path:"/staff",component:R}),e.jsx(t,{path:"/staff/dashboard",component:z}),e.jsx(t,{path:"/analytics",component:B}),e.jsx(t,{path:"/login",component:ie}),e.jsx(t,{path:"/unauthorized",component:oe}),e.jsx(t,{path:"/unified-dashboard",children:e.jsx(s,{requireAuth:!0,children:e.jsx(r,{children:e.jsx(I,{})})})}),e.jsx(t,{path:"/unified-dashboard/requests",children:e.jsx(s,{requireAuth:!0,children:e.jsx(r,{children:e.jsx(F,{})})})}),e.jsx(t,{path:"/unified-dashboard/analytics",children:e.jsx(s,{requireAuth:!0,children:e.jsx(r,{children:e.jsx(U,{})})})}),e.jsx(t,{path:"/unified-dashboard/staff-management",children:e.jsx(s,{requireAuth:!0,children:e.jsx(r,{children:e.jsx(H,{})})})}),e.jsx(t,{path:"/unified-dashboard/system-monitoring",children:e.jsx(s,{requireAuth:!0,children:e.jsx(r,{children:e.jsx(G,{})})})}),e.jsx(t,{path:"/unified-dashboard/settings",children:e.jsx(s,{requireAuth:!0,children:e.jsx(r,{children:e.jsx(W,{})})})}),e.jsx(t,{path:"/unified-dashboard/guest-management",children:e.jsx(s,{requireAuth:!0,children:e.jsx(r,{children:e.jsx(Q,{})})})}),e.jsx(t,{path:"/unified-dashboard/security",children:e.jsx(s,{requireAuth:!0,children:e.jsx(r,{children:e.jsx(V,{})})})}),e.jsx(t,{path:"/unified-dashboard/logs",children:e.jsx(s,{requireAuth:!0,children:e.jsx(r,{children:e.jsx(K,{})})})}),e.jsx(t,{path:"/unified-dashboard/integrations",children:e.jsx(s,{requireAuth:!0,children:e.jsx(r,{children:e.jsx(O,{})})})}),e.jsx(t,{path:"/dashboard",children:e.jsx(s,{requireAuth:!0,children:e.jsx(i,{children:e.jsx(Y,{})})})}),e.jsx(t,{path:"/dashboard/setup",children:e.jsx(s,{requireAuth:!0,children:e.jsx(i,{children:e.jsx($,{})})})}),e.jsx(t,{path:"/dashboard/assistant",children:e.jsx(s,{requireAuth:!0,children:e.jsx(i,{children:e.jsx(J,{})})})}),e.jsx(t,{path:"/dashboard/analytics",children:e.jsx(s,{requireAuth:!0,children:e.jsx(i,{children:e.jsx(X,{})})})}),e.jsx(t,{path:"/dashboard/settings",children:e.jsx(s,{requireAuth:!0,children:e.jsx(i,{children:e.jsx(Z,{})})})}),e.jsx(t,{path:"/dashboard/billing",children:e.jsx(s,{requireAuth:!0,children:e.jsx(i,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Thanh toán & Đăng ký"}),e.jsx("p",{className:"text-gray-600",children:"Trang quản lý thanh toán đang được phát triển..."})]})})})}),e.jsx(t,{path:"/dashboard/team",children:e.jsx(s,{requireAuth:!0,requiredRole:"admin",children:e.jsx(i,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Quản lý Nhóm"}),e.jsx("p",{className:"text-gray-600",children:"Trang quản lý nhóm đang được phát triển..."})]})})})}),e.jsx(t,{component:ee})]})}):e.jsx(g,{})}function ce(){return console.log("[DEBUG] AppContent render"),E(),e.jsxs(_,{children:[e.jsx(le,{}),e.jsx(P,{})]})}function de(){return console.log("[DEBUG] App render"),e.jsx(te,{children:e.jsx(L,{children:e.jsx(M,{children:e.jsx(C,{children:e.jsx(ce,{})})})})})}const he=async()=>{try{console.log("🚀 [Main] Starting authentication initialization..."),localStorage.removeItem("token"),sessionStorage.removeItem("token"),localStorage.removeItem("dev_auth_token"),console.log("🧹 [Main] Cleared all existing tokens to test new credentials"),await se()?(console.log("✅ [Main] Fresh authentication token generated successfully"),console.log("🎫 [Main] Token stored in localStorage")):(console.warn("⚠️ [Main] Failed to generate authentication token"),console.log("🔧 [Main] You can run: debugAuth.runFullTest() in console to debug"))}catch(n){console.error("❌ [Main] Failed to initialize authentication:",n),console.log("🔧 [Main] You can run: debugAuth.runFullTest() in console to debug")}};console.log("🚀 [Main] App starting - initializing authentication...");he();q.createRoot(document.getElementById("root")).render(e.jsx(f.StrictMode,{children:e.jsx(de,{})}));
